{"version":3,"sources":["webpack:///./client/components/Video/VideoPlayer.js","webpack:///min-document (ignored)","webpack:///min-document (ignored)?d13b"],"names":["videojs","options","hls","overrideNative","html5","nativeAudioTracks","nativeVideoTracks","window","require","VideoPlayer","player","Math","floor","currentTime","isFullscreen_","document","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","paused","pause","play","props","waterMarkText","onVideoEnd","onNext","onPrev","videoSource","playbackRates","sources","registerPlugin","watermark","videoNode","debug","onPlayerReady","src","controlBar","addChild","type","text","continueVideo","storage","get","parsedInt","parseInt","remove","on","console","log","Button","getComponent","PrevButton","extend","constructor","apply","arguments","addClass","controlText","handleClick","NextButton","registerComponent","getChild","seekButtons","forward","back","forwardIndex","backIndex","dispose","captions","width","node","React","Component"],"mappings":"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","file":"components-Video-VideoPlayer.96c4106b7f83e2927428.js","sourcesContent":["import React from \"react\";\r\nimport videojs from \"video.js\";\r\n\r\nimport \"video.js/dist/video-js.min.css\";\r\nimport \"@silvermine/videojs-quality-selector/dist/css/quality-selector.css\";\r\nimport watermark from \"videojs-watermark-with-text\";\r\nimport seekButtons from \"videojs-seek-buttons\";\r\nimport \"videojs-seek-buttons/dist/videojs-seek-buttons.css\";\r\n\r\nimport storage from \"../../services/storage\";\r\n\r\nvideojs.options.hls.overrideNative = true;\r\nvideojs.options.html5.nativeAudioTracks = false;\r\nvideojs.options.html5.nativeVideoTracks = false;\r\n\r\nwindow.videojs = videojs;\r\nrequire(\"videojs-contrib-hls\");\r\n// import \"videojs-watermark-with-text/dist/videojs-watermark.css\";\r\nrequire(\"@silvermine/videojs-quality-selector\")(videojs);\r\n\r\nclass VideoPlayer extends React.Component {\r\n  componentDidMount() {\r\n    const {\r\n      waterMarkText = \"\",\r\n      onVideoEnd,\r\n      onNext,\r\n      onPrev,\r\n      videoSource = \"\",\r\n      playbackRates,\r\n      sources,\r\n    } = this.props;\r\n\r\n    videojs.registerPlugin(\"watermark\", watermark);\r\n\r\n    this.player = videojs(\r\n      this.videoNode,\r\n      {\r\n        html5: {\r\n          nativeAudioTracks: false,\r\n          nativeVideoTracks: false,\r\n          hls: {\r\n            overrideNative: true,\r\n            debug: true,\r\n          },\r\n        },\r\n        playbackRates,\r\n      },\r\n      function onPlayerReady() {\r\n        this.src(sources);\r\n        this.controlBar.addChild(\"QualitySelector\");\r\n\r\n        this.watermark({\r\n          type: \"text\",\r\n          text: waterMarkText,\r\n        });\r\n\r\n        const continueVideo = storage.get(\"continue_video\");\r\n\r\n        if (continueVideo) {\r\n          const parsedInt = parseInt(continueVideo) || 0;\r\n\r\n          this.currentTime(parsedInt);\r\n\r\n          storage.remove(\"continue_video\");\r\n        }\r\n\r\n        this.on(\"ended\", () => {\r\n          if (onVideoEnd) onVideoEnd();\r\n        });\r\n      }\r\n    );\r\n\r\n    console.log(\"PLAYER -=> \", this.player);\r\n\r\n    //////// backward and forward buttons\r\n    /* ADD PREVIOUS */\r\n    var Button = videojs.getComponent(\"Button\");\r\n\r\n    var PrevButton = videojs.extend(Button, {\r\n      constructor: function () {\r\n        Button.apply(this, arguments);\r\n\r\n        this.addClass(\"vjs-icon-previous-item\");\r\n        this.controlText(\"Previous\");\r\n      },\r\n\r\n      handleClick: function () {\r\n        if (onPrev) onPrev();\r\n      },\r\n    });\r\n\r\n    /* ADD PREVIOUS */\r\n    var NextButton = videojs.extend(Button, {\r\n      constructor: function () {\r\n        Button.apply(this, arguments);\r\n\r\n        this.addClass(\"vjs-icon-next-item\");\r\n        this.controlText(\"Next\");\r\n      },\r\n\r\n      handleClick: function () {\r\n        if (onNext) onNext();\r\n      },\r\n    });\r\n\r\n    // Register the new component\r\n    videojs.registerComponent(\"NextButton\", NextButton);\r\n    videojs.registerComponent(\"PrevButton\", PrevButton);\r\n    //player.getChild('controlBar').addChild('SharingButton', {});\r\n    this.player.getChild(\"controlBar\").addChild(\"PrevButton\", {}, 0);\r\n    this.player.getChild(\"controlBar\").addChild(\"NextButton\", {}, 2);\r\n\r\n    ///seek buttons\r\n    this.player.seekButtons({\r\n      forward: 5,\r\n      back: 5,\r\n      forwardIndex: 3,\r\n      backIndex: 3,\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.player) {\r\n      this.player.dispose();\r\n    }\r\n  }\r\n\r\n  getCurrentDuration = () => {\r\n    if (!this.player) return 0;\r\n    return Math.floor(this.player.currentTime());\r\n  };\r\n\r\n  exitFullScreen = () => {\r\n    if (!this.player) return;\r\n    if (!this.player.isFullscreen_) return;\r\n    const document = window.document;\r\n    if (document.exitFullscreen) {\r\n      document.exitFullscreen();\r\n    } else if (document.webkitExitFullscreen) {\r\n      document.webkitExitFullscreen();\r\n    } else if (document.mozCancelFullScreen) {\r\n      document.mozCancelFullScreen();\r\n    } else if (document.msExitFullscreen) {\r\n      document.msExitFullscreen();\r\n    }\r\n  };\r\n  paused = () => this.player.paused();\r\n  pause = () => {\r\n    if (!this.player) return;\r\n    this.player.pause();\r\n  };\r\n  play = () => {\r\n    if (!this.player) return;\r\n    this.player.play();\r\n  };\r\n\r\n  render() {\r\n    const { captions } = this.props;\r\n    return (\r\n      <div className=\"course-video-wrapper\">\r\n        <div data-vjs-player>\r\n          <video\r\n            id=\"my-vide-player\"\r\n            width=\"720\"\r\n            height=\"420\"\r\n            style={{ width: \"100%\" }}\r\n            controls={true}\r\n            ref={(node) => (this.videoNode = node)}\r\n            className=\"video-js vjs-default-skin vjs-big-play-centered\"\r\n            controlsList=\"nodownload\"\r\n          >\r\n            {captions && (\r\n              <track\r\n                kind=\"captions\"\r\n                src={captions}\r\n                srclang=\"en\"\r\n                label=\"English\"\r\n                default\r\n              ></track>\r\n            )}\r\n          </video>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default VideoPlayer;\r\n","/* (ignored) */","/* (ignored) */"],"sourceRoot":""}